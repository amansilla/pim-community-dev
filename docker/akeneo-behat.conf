<VirtualHost *:80>
    ServerName akeneo-behat.dev

    DocumentRoot /srv/pim/web
    <Directory /srv/pim/web>
        AllowOverride None
        Require all granted

        Options -MultiViews
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^(.*)$ app_behat.php [QSA,L]
    </Directory>

    <Directory /srv/pim>
        Options FollowSymlinks
    </Directory>

    <Directory /srv/pim/web/bundles>
        RewriteEngine Off
    </Directory>

    <IfModule mod_headers.c>
        Header set Content-Security-Policy "default-src 'self' *.akeneo.com 'unsafe-inline'; script-src 'self' 'unsafe-eval' 'nonce-%{UNIQUE_ID}e'"
        Header set X-Content-Security-Policy "default-src 'self' *.akeneo.com 'unsafe-inline'; script-src 'self' 'unsafe-eval' 'nonce-%{UNIQUE_ID}e'"
        Header set X-WebKit-CSP "default-src 'self' *.akeneo.com 'unsafe-inline'; script-src 'self' 'unsafe-eval' 'nonce-%{UNIQUE_ID}e'"
    </IfModule>

    ErrorLog /var/log/akeneo-behat_error.log
    LogLevel warn
    CustomLog /var/log/akeneo-behat_access.log combined
</VirtualHost>
